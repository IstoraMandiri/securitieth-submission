<head>
  <title>securitieth-meteor</title>
</head>

<body>
  {{> explorer}}
</body>

<template name="explorer">
  <div class="container center-align">
  <div class="row">
    <div class="col s12">
      <h1>Securitieth Explorer</h1>
    </div>
  </div>
  {{#if getVar 'registryAddr'}}
      <div class="btn refresh">Refresh</div>
      <p>Registry: {{getVar 'registryAddr'}}</p>
      <div class="row">
        <div class="col s12">
          {{> securities}}
        </div>
      </div>
  {{else}}
    <div class="row">
      <div class="col m5">
        <input class='set-registry' type="text" placeholder="Enter Registry Address"/>
      </div>
      <div class="col m2">
        or
      </div>
      <div class="col m5">
        <a href="#" class='btn btn-block create-registry'>Create a registry</a>
      </div>
    </div>
  {{/if}}
  </div>
</template>

<template name="securities">
  <div class="btn create-security">New Security</div>
  {{#each securities}}
    {{> security}}
  {{/each}}
</template>

<template name="security">
  <div class="security card">
    <div class="card-content left-align">
      <p>Security: {{address}}</p>
      <p>Your Balance: {{getLatestBalance}}</p>
      <p>Title: {{security.title}}</p>
      <p>Issuer: {{security.issuer}}</p>
      <p>State: {{security.currentState}}</p>
      {{#each availableActions}}
        <div class="btn add-corporate-action" title='{{description}}'>{{name}}</div>
      {{/each}}
      {{#each getCorporateActions}}
        {{> ca}}
        <hr class='divider'>
      {{/each}}
    </div>
  </div>
</template>

<template name="ca">
  <p>Corp Action {{type}} - {{address}} - Wei: {{balance}}</p>
  {{#each methods}}
    <p>Method: {{name}} {{value}}</p>
  {{/each}}
</template>